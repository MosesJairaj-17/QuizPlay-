<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QuizPlay| Dashboard</title>
  <link rel="icon" type="image/png" href="css/logo.png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Global styles -->
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/leaderboard.css" />

  <style>
    /* ================= DASHBOARD WRAPPER ================= */
    .dashboard-container {
      max-width: 980px;
      margin: 40px auto 60px;
      background: var(--bg-card);
      padding: 40px;
      border-radius: 36px;
      box-shadow: var(--shadow);
    }

    /* ================= BACK BUTTON ================= */
    .dashboard-back {
      display: inline-block;
      margin-bottom: 24px;
      padding: 10px 18px;
      background: var(--accent-soft);
      color: var(--accent);
      border-radius: 14px;
      font-size: 0.9rem;
      font-weight: 600;
      text-decoration: none;
    }

    /* ================= PROFILE ================= */
    .dashboard-profile {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 36px;
    }

    .dashboard-profile img {
      width: 88px;
      height: 88px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid var(--accent);
    }

    .dashboard-profile h2 {
      margin: 0;
      font-size: 1.5rem;
      font-weight: 700;
    }

    .dashboard-profile p {
      margin-top: 4px;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    /* ================= TABS ================= */

.dashboard-tabs {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
}

.tab-btn {
  padding: 10px 18px;
  border-radius: 999px;
  border: 2px solid var(--accent-soft);
  background: transparent;
  color: var(--text-muted);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.tab-btn.active {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}

.tab-content {
  display: none;
}

.tab-content.active {
  display: block;
}


    /* ================= STATS ================= */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 40px;
    }

    .stat-card {
      background: var(--accent-soft);
      border-radius: 22px;
      padding: 26px;
      text-align: center;
    }

    .stat-card h4 {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-bottom: 8px;
      font-weight: 600;
    }

    .stat-card p {
      font-size: 2rem;
      font-weight: 800;
      color: var(--accent);
    }

    /* ================= HISTORY ================= */
    .history-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 16px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 22px;
      overflow: hidden;
    }

    thead {
      background: var(--accent);
    }

    th {
      padding: 16px;
      font-size: 0.9rem;
      color: #fff;
      font-weight: 600;
      text-align: center;
    }

    td {
      padding: 14px;
      text-align: center;
      font-size: 0.9rem;
      border-bottom: 1px solid var(--border);
    }

    tbody tr:hover {
      background: var(--accent-soft);
    }

    /* ================= LOGIN REQUIRED ================= */
    .login-required-page {
      min-height: 80vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .login-required-card {
      background: var(--bg-card);
      padding: 42px 36px;
      border-radius: 28px;
      max-width: 460px;
      width: 100%;
      text-align: center;
      box-shadow: var(--shadow);
    }

    .login-required-card h1 {
      font-size: 1.9rem;
      margin-bottom: 14px;
    }

    .login-required-card p {
      color: var(--text-muted);
      margin-bottom: 28px;
      line-height: 1.6;
    }

    .hidden {
      display: none;
    }

/* ================= RESPONSIVE STATS GRID ================= */
@media (max-width: 900px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: 1fr;
  }


      .dashboard-profile {
        flex-direction: column;
        text-align: center;
      }
    }
    
      @media (max-width: 768px) {
  .dashboard-container {
    margin: 16px 12px 40px;
    padding: 26px 20px;
    border-radius: 28px;
  }
}

@media (max-width: 600px) {
  .dashboard-profile img {
    width: 72px;
    height: 72px;
  }

  .dashboard-profile h2 {
    font-size: 1.3rem;
  }
}

@media (max-width: 600px) {
  .dashboard-tabs {
    overflow-x: auto;
    padding-bottom: 6px;
  }

  .tab-btn {
    white-space: nowrap;
    flex-shrink: 0;
  }
}

/* ================= RESPONSIVE TABLE ================= */
@media (max-width: 700px) {
  table {
    display: block;
    overflow-x: auto;
    white-space: nowrap;
  }

  th, td {
    padding: 12px 10px;
    font-size: 0.85rem;
  }
}


  </style>
</head>

<body>

  <!-- ================= NAVBAR ================= -->
<div id="navbar-container"></div>

  <!-- ================= LOGIN REQUIRED ================= -->
  <div id="loginRequired" class="login-required-page hidden">
    <div class="login-required-card">
      <h1>Login Required</h1>
      <p>
        Please log in using <strong>Email</strong> or <strong>Google</strong>
        to view your dashboard and saved progress.
      </p>
      <button class="btn primary" onclick="location.href='auth.html'">
        Login Now
      </button>
    </div>
  </div>

  <!-- ================= DASHBOARD ================= -->
  <div id="dashboardContent" class="dashboard-container hidden">

    <a href="index.html" class="dashboard-back">‚Üê Back to Home</a>

    <!-- PROFILE -->
    <div class="dashboard-profile">
      <img id="profilePic"
           src="https://cdn-icons-png.flaticon.com/512/149/149071.png"
           alt="Profile">
      <div>
        <h2 id="userName">User</h2>
        <p id="userEmail"></p>
      </div>
    </div>

    <!-- STATS -->
    <div class="stats-grid">
  <div class="stat-card">
    <h4>Your Rank</h4>
    <p id="userRank">-</p>
  </div>

  <div class="stat-card">
    <h4>Total Points</h4>
    <p id="totalPoints">0</p>
  </div>

  <div class="stat-card">
    <h4>Highest Points</h4>
    <p id="highestPoints">0</p>
  </div>

  <div class="stat-card">
    <h4>Total Quizzes</h4>
    <p id="totalQuizzes">0</p>
  </div>
</div>

<!-- ================= TABS ================= -->
<div class="dashboard-tabs">
  <button class="tab-btn active" data-tab="history">Quiz History</button>
  <button class="tab-btn" data-tab="progress">Progress Over Time</button>
  
</div>

<!-- ================= TAB CONTENT ================= -->

<div id="tab-history" class="tab-content active">
  <table>
    <thead>
  <tr>
    <th>Category</th>
    <th>Level</th>
    <th>Timer</th>
    <th>Score</th>
    <th>Points</th>
    <th>Date & Time</th>
  </tr>
</thead>

    <tbody id="historyBody">
      <tr>
        <td colspan="5">Loading...</td>
      </tr>
    </tbody>
  </table>
</div>

<div id="tab-progress" class="tab-content">
  <canvas id="progressChart" height="120"></canvas>
</div>


  <!-- JS -->
     <script src="js/navbar.js"></script>

  <script src="js/dashboard.js"></script>
  <script src="js/theme.js"></script>


  <!-- AUTH SWITCH -->
  <script>
    const user = JSON.parse(localStorage.getItem("user"));
    const dashboard = document.getElementById("dashboardContent");
    const loginRequired = document.getElementById("loginRequired");

    if (!user || user.role === "guest") {
      loginRequired.classList.remove("hidden");
    } else {
      dashboard.classList.remove("hidden");
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<link rel="stylesheet" href="css/chatbot.css">

<div id="chatbot-container"></div>

<script src="js/loadChatbot.js"></script>
<script src="js/chatbot.js"></script>

</body>
</html>
